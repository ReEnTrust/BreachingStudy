var hotelListString= "13 Rue des Écoles;83269;48.8477957;2.3515231;Paris;Hotel Minerve Paris;Hotel;http://tour-pedia.org/api/getPlaceDetails?id=83269;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=83269;11;https://www.hpm.ba/wp-content/uploads/WPL/41/thimg_5_370x220.JPG;3.3;168;true;yes;B;10+40 Avenue de Friedland;83280;48.874192555247;2.2982347011566;Paris;Hotel Napoléon;Hotel;http://tour-pedia.org/api/getPlaceDetails?id=83280;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=83280;14;https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTkkeaxP-WfysI14xmHk8u-0GypeV76NUOoO3oR0x5oV9296Z1q;6.2;174;true;yes;B;0+13 Boulevard du Temple;83286;48.863912740184;2.3660878054094;Paris;Murano Urban Resort;Resort;http://tour-pedia.org/api/getPlaceDetails?id=83286;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=83286;11;https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRqScU7LM7vdVeF5cBzZ4sv0sYPvxhYdYW9vJwekWg_QbzxiZ2P1g;5.4;148;true;yes;B;0+98 Boulevard de Magenta;83296;48.877691;2.35484;Paris;Hotel de L'Europe;Hotel;http://tour-pedia.org/api/getPlaceDetails?id=83296;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=83296;20;https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTbA8fpJRx9NO0kv4OVb4Fv0IipMjVzeehR0v_WxSl0xTIkso-Ebw;10;161;true;yes;B;0+14 Rue de la Trémoille;83303;48.866866;2.302995;Paris;Hotel de la Trémoille;Hotel;http://tour-pedia.org/api/getPlaceDetails?id=83303;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=83303;14;https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ8dSyhIK6sNnoZmOs_VmHSuv0gT6C0AF9bHY5lcwQA_xSu0GPIcA;6.7;171;true;yes;B;0+8 Rue de Verneuil;83332;48.857423;2.331469;Paris;Hotel Verneuil;Hotel;http://tour-pedia.org/api/getPlaceDetails?id=83332;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=83332;15;https://www.hpm.ba/wp-content/uploads/WPL/151/thimg_cuk4-800_370x220.jpg;10;164;true;yes;Bb;0+2 Rue du Colonel Pierre Avia;75015;48.8327198;2.278119;Paris;Hotel Victorianne;Hotel;http://tour-pedia.org/api/getPlaceDetails?id=83369;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=85547;17;https://www.visitlisboa.com/sites/default/files/styles/result_detail_370x260_/public/2018-06/1633-1908%20Lisboa%20Hotel-5.jpg?itok=3tyh95qv;No reviews;153;false;yes;bb;0+1 Boulevard Ornano;83369;48.894298295672;2.3493208323998;Paris;Hotel Victoria;Hotel;http://tour-pedia.org/api/getPlaceDetails?id=83369;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=83369;17;https://www.visitlisboa.com/sites/default/files/styles/result_detail_370x260_/public/2018-06/1633-1908%20Lisboa%20Hotel-5.jpg?itok=3tyh95qv;5;151;false;yes;bb;10+35 Rue de Berri;83801;48.871101721121;2.3041541579164;Paris;Champs-Elysees Plaza;Hotel;http://tour-pedia.org/api/getPlaceDetails?id=83801;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=83801;13;https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRDgsHF28ayCncEhIn7habvgpQf5bpUrmVuy198gONrOsEYqJdfPw;4.3;149;false;yes;bb;0+36 Rue Pierre Demours;83905;48.881147;2.29472;Paris;Waldorf Arc de Triomphe Hotel & Spa;Hotel & Spa;http://tour-pedia.org/api/getPlaceDetails?id=83905;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=83905;17;https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSy9OC5MOHRyUQezx58QG6LtGyEVpvcZxkPYAT9Bnxg1uJGx4t1;7.5;165;false;yes;Bb;0+108 Rue Monge;83972;48.839386;2.351151;Paris;Hotel de France;Hotel;http://tour-pedia.org/api/getPlaceDetails?id=83972;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=83972;13;https://image.goodchoice.kr/resize_370x220/adimg_new/46260/108314/e24a0e7a29b3f8a9bb9f2ae8388119bf.jpg;0;173;false;yes;B;0+143 Avenue Malakoff;84795;48.87552;2.283811;Paris;La Villa Maillot & Spa ****;Hotel & Spa;http://tour-pedia.org/api/getPlaceDetails?id=84795;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=84795;13;https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ39qgo_1OWHkM0ZbZnWUy_MwUdLb81sqSbw2B47m5DjK_TJWU7;5;148;false;yes;bbb;10+25, Avenue Du General Leclerc;84801;48.831089879632;2.3299495068815;Paris;Hotel Best Western;Hotel;http://tour-pedia.org/api/getPlaceDetails?id=84801;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=84801;19;https://www.zimbali.org/images/370x220/seaview-suite.jpg;6.3;264;false;yes;B;0+4, Rue Richard Lenoir;85308;48.854312;2.382472;Paris;BLC Design Hotel;Hotel;http://tour-pedia.org/api/getPlaceDetails?id=85308;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=85308;11;https://www.meuquartoemlondres.com.br/image/resize_crop?q=70&w=370&h=220&src=userfiles/quartos/e53c3a22c50f3e4cebb4bdbafb77f15b.jpg;8.3;166;false;yes;B;0+14 Rue Alexandre Dumas;85315;48.853088707029;2.390325726221;Paris;Entrée des artistes;Resort;http://tour-pedia.org/api/getPlaceDetails?id=85315;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=85315;18;https://secure.hotels.tv/images/hotels/86/558.jpg;0;300;false;yes;B;10+10 Rue de Stockholm;85341;48.877162;2.321935;Paris;Hotel Wilson Opera;Hotel;http://tour-pedia.org/api/getPlaceDetails?id=85341;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=85341;13;http://www.mysticaltoursandsafaris.com/wp-content/uploads/2018/12/EN.png;6.7;167;false;yes;B;0+Avenue des Gobelins 50;85438;48.83403;2.353714;Paris;Oops! Hostel;Hostel;http://tour-pedia.org/api/getPlaceDetails?id=85438;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=85438;19;https://www.listowelmotel.com/images/king-suites-03.jpg;6.6;159;false;no;B;0+1-7 Cour du Minervois;85547;48.831971;2.38686;Paris;Adagio Bercy Aparthotel;Hotel;http://tour-pedia.org/api/getPlaceDetails?id=85547;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=85547;13;https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSJq1GC0MNUtgbpZ1nuW4gX1OTlRgFxl7mYeAxB6lHmLGFDkKyORw;No reviews;155;false;yes;bb;5+64 Marceau;85563;48.870501863267;2.2981595993042;Paris;InterContinental;Hotel;http://tour-pedia.org/api/getPlaceDetails?id=85563;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=85563;19;http://renoassicurazioni.it/wp-content/uploads/2016/10/hotel-room-1447201_1920-370x220.jpg;6;160;false;yes;B;0+19 Rue de Berne;85575;48.880964;2.322821;Paris;Hotel Cervantes 3*;Hotel;http://tour-pedia.org/api/getPlaceDetails?id=85575;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=85575;17;https://imagery.hoteltonight.com/production/attachments/files/850175/original_normalized.jpg?fit=crop&h=220&dpr=1&hotel_id=11158;8;157;false;yes;B;0+Porte De Versailles Vaugirard;85671;48.832934297234;2.2880879169389;Paris;Hotel Mercure;Hotel;http://tour-pedia.org/api/getPlaceDetails?id=85671;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=85671;14;http://fctat.com/wp-content/uploads/2013/02/Maldives_3.jpg;8;165;false;yes;B;0+185 Boulevard brune;85706;48.823603;2.324225;Paris;Quality hotel;Hotel;http://tour-pedia.org/api/getPlaceDetails?id=85706;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=85706;13;https://www.edinburghpearlapartments.co.uk/wp/wp-content/uploads/2016/09/twin-bedroom-self-catering-edinburgh-lp228-01-370x220.jpg;5;162;false;no;bb;0+37 Rue Servan;85741;48.861245815423;2.3829030274544;Paris;Hotel De Belfort Paris;Hotel;http://tour-pedia.org/api/getPlaceDetails?id=85741;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=85741;11;https://www.literie-pro-direct.fr/modules/themeconfigurator/img/b3245be58f1ca53592ba8ea136b6bbdd5bcfca07_chambre-temoin-d-hotel-.jpg;5;182;false;yes;B;10+21 Boulevard de Clichy;85748;48.882273173988;2.3363996771326;Paris;Timhotel;Hotel;http://tour-pedia.org/api/getPlaceDetails?id=85748;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=85748;13;https://www.clanmacthomas.uk/siteimages/scotlandshotelpitlochryjuniorsuite.jpg;4;161;false;yes;B;0+9 Rue Littre;85802;48.84552739654;2.3244607158731;Paris;Hotel Littre****;Hotel;http://tour-pedia.org/api/getPlaceDetails?id=85802;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=85802;10;https://firstchoicepd.com/wp-content/uploads/2017/05/3.jpg;1.3;148;false;yes;B;0+94 Rue Didot;85860;48.828091;2.315337;Paris;Citadines Hotel;Hotel;http://tour-pedia.org/api/getPlaceDetails?id=85860;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=85860;16;http://www.sunmeliabeachresort.com/assets/img/rooms/standard.jpg;2;135;false;yes;bb;0+46 Boulevard Saint-Germain;85970;48.849695106551;2.3504990022073;Paris;Hotel Abbatial Saint-Germain;Hotel;http://tour-pedia.org/api/getPlaceDetails?id=85970;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=85970;15;http://www.donatello.it/thumb/370x220x1/pagine_foto/000008/fullsizeoutput_342b.jpg;8;150;false;yes;B;20+1-7 Cour Du Minervois;85972;48.829365;2.426541;Paris;Adagio City Aparthotel Paris Bercy;Hotel;http://tour-pedia.org/api/getPlaceDetails?id=85972;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=85972;20;https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSEixHDKqlVw8ElBNcWHstMLMl54FaGCdA1kEmN_xLvvNAC7ePu9g;No reviews;161;false;yes;B;0+12 Rue Guenot;86086;48.851404744491;2.3924892971834;Paris;Alfa Hotel Nation Paris;Hotel;http://tour-pedia.org/api/getPlaceDetails?id=86086;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=86086;19;http://www.liberohotel.co.kr/images/main/tmp_main2_1.jpg;0;179;false;yes;B;0+13, Rue de Rocroy;86109;48.879696;2.350961;Paris;Hotel de Rocroy;Hotel;http://tour-pedia.org/api/getPlaceDetails?id=86109;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=86109;10;https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRlBHryfy2GaWnBvhSYM6gZ7V5uTscR1_pdny1P7lL9Kl4nJ_Aj;8.6;162;false;no;B;0+111 Boulevard Poniatowski;86119;48.835006200502;2.4057039677833;Paris;Hotel Ibis;Hotel;http://tour-pedia.org/api/getPlaceDetails?id=86119;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=86119;15;http://www.mysticaltoursandsafaris.com/wp-content/uploads/2018/12/SMGC.png;5;178;false;yes;B;0+92 Rue la Boétie;86165;48.872342714074;2.3092480114837;Paris;Hotel Rochester ****;Hotel;http://tour-pedia.org/api/getPlaceDetails?id=86165;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=86165;16;https://baked.ag/wp-content/themes/agatha-wp/assets/dist/images/hotel-img-2.jpg;5;184;false;yes;B;30+147 Rue alésia;86240;48.830087;2.320258;Paris;Hotel Montparnasse;Hotel;http://tour-pedia.org/api/getPlaceDetails?id=86240;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=86240;19;http://static.hotels-around.me/uploads/images/HI70054721.jpg;0;182;false;yes;B;0+Rue Emile Reynaud;86550;48.90107;2.388984;Paris;B&B Hotel;Hotel;http://tour-pedia.org/api/getPlaceDetails?id=86550;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=86550;10;https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR4XdMoq_RAIi9tzpwc95e1bc7T7XQ4-TTXPA7y0FFa0yLX7sZA;6.2;166;false;yes;B;0+12 Rue Louis Blanc;86613;48.879534049758;2.3684763908386;Paris;Ibis Jenmapes;Hotel;http://tour-pedia.org/api/getPlaceDetails?id=86613;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=86613;14;http://www.mollervilla.com/wp-content/uploads/2017/04/page-img2.jpg;2;173;false;no;B;0+132 Boulevard voltaire;86675;48.857537;2.380751;Paris;Le Royal Voltaire;Hotel;http://tour-pedia.org/api/getPlaceDetails?id=86675;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=86675;19;http://pensioneleni.gr/sites/default/files/styles/recent_work/public/double-sea-001.jpg?itok=-JuujOIx;3.3;157;false;yes;B;0+79-81 Avenue du Maine;86776;48.83824372402;2.3226664469327;Paris;Holiday Inn;Hotel;http://tour-pedia.org/api/getPlaceDetails?id=86776;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=86776;16;https://www.perigiali.com/images/bedroom-apartment.jpg;5;195;false;yes;B;0+Courtalain;86995;48.839833;2.407029;Paris;Chateau De Courtalain;Hotel;http://tour-pedia.org/api/getPlaceDetails?id=86995;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=86995;12;https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTtQ14OCbPIiAQbVz8U_JJvyee6pEgpi3FEbWyzMvhagDt6hPmloA;No reviews;150;false;yes;bb;10+203 Rue de Paris;86999;48.82942175;2.4011446;Paris;Citéa - Porte de Charenton;Motel;http://tour-pedia.org/api/getPlaceDetails?id=86999;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=86999;14;https://content3.jdmagicbox.com/comp/neemuch/b3/9999p7423.7423.160920150909.i5b3/catalogue/vrindavan-greens-neemuch-ho-neemuch-hotels-vxh2vhq.jpg;1.3;99;false;no;b;0+12 Rue Léon Frot;87041;48.853673;2.388069;Paris;Comfort Hotel;Hotel;http://tour-pedia.org/api/getPlaceDetails?id=87041;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=87041;15;https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSr63EsxXUMvfh_0sTu-JR7Pfp7e7S7aLh0cg18_DILY2GpjNq2xw;6.3;175;false;yes;B;0+21 Rue de Tolbiac;87138;48.829010125586;2.3740333235695;Paris;Ibis Styles;Hotel;http://tour-pedia.org/api/getPlaceDetails?id=87138;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=87138;16;https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRbYKoCnQsLaNE1LNSAfEfSwPDAnlMEChKoVIoZeo3x5mxJQfJjqg;10;155;false;yes;bb;0+15/17 Boulevard R. Rolland;87255;48.819498;2.326475;Paris;Etap Hotel Porte D' Orleans;Hotel;http://tour-pedia.org/api/getPlaceDetails?id=87255;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=87255;20;https://www.hpm.ba/wp-content/uploads/WPL/161/thimg_DSC06068_370x220.JPG;5;148;false;yes;b;0+4 Boulevard Berthier;87280;48.894400270362;2.3126089095274;Paris;Timhotel;Hotel;http://tour-pedia.org/api/getPlaceDetails?id=87280;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=87280;16;https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTI1gkWq3HsmBkhlFe4HxSS3N-d_5QhYnPvieVH85Y4FWFIKGR5;4;177;false;yes;B;0+7, Rue Jean Lantier;87480;48.8584145;2.3465319;Paris;Hotel Louvre-Rivoli;Hotel;http://tour-pedia.org/api/getPlaceDetails?id=87480;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=87480;10;http://www.mcrufusinteractive.com/homecoming2017/img/our-team/hotel.jpg;0;180;false;yes;B;20+Avenue Victor Hugo, 16ème Bois de Boulogne Trocade;87650;48.8637;2.2769;Paris;Waytostay;Hotel;http://tour-pedia.org/api/getPlaceDetails?id=87650;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=87650;20;https://www.chateaudepierreclos.com/wp-content/uploads/2018/03/Chambre-de-Paloma-1.jpg;No reviews;166;false;yes;B;0+43 Rue Parmentier;87864;48.829289445005;2.461118574871;Paris;Hotel Napa;Hotel;http://tour-pedia.org/api/getPlaceDetails?id=87864;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=87864;20;http://www.mountainresortlipe.com/_include/img/gallery/deluxe-garden/13.jpg;No reviews;157;false;yes;bb;0+20 Ave. de Tourville;88114;48.854142;2.307498;Paris;Hotel De Turenne;Hotel;http://tour-pedia.org/api/getPlaceDetails?id=88114;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=88114;13;https://www.castellon-airport.net/img/gallery/blog-med-img-2.png;10;184;false;yes;bb;0+71 Rue de Charonne;88133;48.853680043257;2.3805898065676;Paris;Hi-Matic/Hi-Life;Hotel;http://tour-pedia.org/api/getPlaceDetails?id=88133;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=88133;11;https://www.edinburghpearlapartments.co.uk/wp/wp-content/uploads/2016/09/family-room-dg81-02-370x220.jpg;4.4;152;false;yes;bb;0+1bis-3, Rue d'Austerlitz;88210;48.829653209824;2.426894903183;Paris;Paris Hotel Gare de Lyon;Hotel;http://tour-pedia.org/api/getPlaceDetails?id=88210;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=88210;20;https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSCcewnbUFJ2Xk-WJ5aD5UelNV9O6q7NZM9gJv0bWwMyyCTLjsI;10;170;false;no;B;0+17 Boulevard Kellermann;88227;48.819637447453;2.3565375432035;Paris;Centres Internationaux de Séjours à Paris;Hostel;http://tour-pedia.org/api/getPlaceDetails?id=88227;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=88227;16;https://www.listowelmotel.com/images/apartment-05.jpg;5;120;false;yes;bb;10+42 Rue de Moscou;88255;48.8817057289;2.3229907121467;Paris;Best Western Astoria Opera;Hotel;http://tour-pedia.org/api/getPlaceDetails?id=88255;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=88255;15;http://files3.http.videopolis.com/partner/8/2/3/3/3/7/3/8233373.jpeg;6.3;149;false;yes;B;0+11 Rue Berryer;88283;48.87530222938;2.3032716194385;Paris;Hotel Salomon de Rotschild;Hotel;http://tour-pedia.org/api/getPlaceDetails?id=88283;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=88283;20;https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTlXQ6V_zA7vyeUD-OoXOgI2I3ZyOssfXljggG2dBHYNEy3xA2O;No reviews;180;false;yes;B;0+1 Boul. Victor;88313;48.836017;2.278666;Paris;Hotel Médian;Hotel;http://tour-pedia.org/api/getPlaceDetails?id=88313;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=88313;15;https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTpqOZCEo9CCe8BoC0bmheGcYeZFDkj-ZMXaJWOwnk72Y3C5F0-Bw;7.5;151;false;yes;b;0+19 Avenue Kléber;88376;48.871024080963;2.2932457923889;Paris;The Peninsula Paris;Hotel;http://tour-pedia.org/api/getPlaceDetails?id=88376;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=88376;12;https://www.crerarhotels.com/media/621669/Ben-Wyvis-Hotel-Bedroom-7.jpg;5;164;false;yes;B;0+5 bis Rue de Messenet;88500;48.858336426754;2.2796190672496;Paris;Best Western Premier Trocadero;Hotel;http://tour-pedia.org/api/getPlaceDetails?id=88500;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=88500;10;https://image3.apartmentfinder.com/i2/gxuvHhm3KctKinr-bAyOwW37JJmhXTfv9PlpkA9MXiE/118/village-oaks-chino-hills-ca-building-photo.jpg;No reviews;160;false;yes;b;0+Quai de la Marne;88626;48.889693310349;2.3827028274536;Paris;Quai de la Marne;Harbor / Marina;http://tour-pedia.org/api/getPlaceDetails?id=88626;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=88626;14;https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTQ554krSUoRi56Jo_H6apuBLVKGFFta1cVKeQoF6tzXnPOMyXTiw;No reviews;145;false;no;bb;0+60 Rue Belgrand;89102;48.864537893587;2.4063226934859;Paris;Hipotel;Hotel;http://tour-pedia.org/api/getPlaceDetails?id=89102;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=89102;17;http://ladarsena.bqhotel.it/images/gallery/comfort/2.jpg;0;156;false;yes;B;0+3 Rue d'Austerlitz;89201;48.846780115158;2.3702223111009;Paris;Timhotel;Hotel;http://tour-pedia.org/api/getPlaceDetails?id=89201;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=89201;20;http://www.totsandtravel.com/images/hotels/US_PA/omni_william_penn_hotel_pittsburgh_pennsylvania-img1012.jpg;8;176;false;yes;BB;10+37 Rue Saint-Charles;89257;48.849820484782;2.2884821891785;Paris;Hotel Eiffel Saint-Charles;Hotel;http://tour-pedia.org/api/getPlaceDetails?id=89257;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=89257;13;https://www.ostarija.si/en/wp-content/uploads/2014/07/hotel-front-370x220.jpg;8.3;168;false;no;B;0+72 Boulevard de Grenelle;89480;48.850517127177;2.2933685055261;Paris;Hotel Relais Saint-Charles;Hotel;http://tour-pedia.org/api/getPlaceDetails?id=89480;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=89480;20;https://www.tokyocityapartments.net/sites/default/files/styles/featured_image/public/Untitled-1_133.jpg?itok=5VAM4jGw;5.5;145;false;yes;b;0+36 Rue de Douai;89696;48.882737;2.332363;Paris;Hotel Fiat;Hotel;http://tour-pedia.org/api/getPlaceDetails?id=89696;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=89696;20;https://cdn.ostrovok.ru/t/x220/carsolize/3d/e5/3de599d1292c5600a4410ec93c9d190cdc8d5167.jpeg;0;130;false;yes;B;0+Rue de crimée;89702;48.886067255581;2.3820376396179;Paris;Hotel Crimée;Hotel;http://tour-pedia.org/api/getPlaceDetails?id=89702;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=89702;17;https://www.guidingstarholidays.com/images/2018/11/16/nature_srilanka_img_03.jpg;No reviews;164;false;yes;B;0+151 bis Rue de Rennes;89779;48.84539900529;2.3256143920708;Paris;Legend Hotel;Hotel;http://tour-pedia.org/api/getPlaceDetails?id=89779;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=89779;14;https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSQ-2tY8Kx1jtgWox4gFR_-DZcWYbZH62vcDJYAktQcxKTp1bZw6w;5;157;false;yes;B;0+2 Boulevard Flandrin;89782;48.864294597013;2.2729391322357;Paris;Vélib' [16-18];Bike Shop Hotel;http://tour-pedia.org/api/getPlaceDetails?id=89782;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=89782;10;https://www.edinburghpearlapartments.co.uk/wp/wp-content/uploads/2016/09/luxury-double-room-dg98-01-370x220.jpg;0;110;false;no;b;0+7 Rue Belidor;90016;48.879931603116;2.2859748118516;Paris;Duplex Belidor;Hotel;http://tour-pedia.org/api/getPlaceDetails?id=90016;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=90016;10;https://www.ecudefrance-mauriac.com/wp-content/uploads/JM-Peyral-2018-42-370x220.jpg;No reviews;150;false;yes;b;0+203 Rue De Paris;90210;48.829283050854;2.4013950767457;Paris;Adagio Access - Porte De Charenton;Hotel;http://tour-pedia.org/api/getPlaceDetails?id=90210;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=90210;13;https://www.crerarhotels.com/media/621668/Ben-Wyvis-Hotel-Bedroom-6.jpg;No reviews;176;false;yes;B;0+66 Rue Jean de la Fontaine;90307;48.850463;2.270494;Paris;Hotel RIBERA;Resort;http://tour-pedia.org/api/getPlaceDetails?id=90307;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=90307;12;http://www.mountainresortlipe.com/_include/img/gallery/grand-deluxe-seaview/02.jpg;No reviews;156;false;yes;B;5+Jean Menans;90691;48.884454498564;2.3762929085332;Paris;Ibis Budget;Hotel;http://tour-pedia.org/api/getPlaceDetails?id=90691;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=90691;12;http://pensioneleni.gr/sites/default/files/styles/recent_work/public/triple-room-001.jpg?itok=Og7UvVeG;3.3;170;false;no;b;0+7 Rue du Général de Larminat, Paris;90746;48.83491;2.276669;Paris;Hotel Ares Eiffel;Hotel;http://tour-pedia.org/api/getPlaceDetails?id=90746;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=90746;17;http://www.nxtgenint.in/wp-content/uploads/2018/08/DSC_0232-min-370x220.jpg;No reviews;173;false;yes;B;0+Rue du Docteur Babinski;91272;48.901010551146;2.3339186018724;Paris;Ibis Budget;Hotel;http://tour-pedia.org/api/getPlaceDetails?id=91272;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=91272;19;https://d1otfi4uhdq3fm.cloudfront.net/content/uploads/2018/08/27095237/Heliconia-Living-Room_1200x800_acf_cropped-370x220.jpg;5;175;false;yes;B;0+31 Rue de la Folie Méricourt;91329;48.863119662529;2.3729395866394;Paris;Hotel FABRIC;Hotel;http://tour-pedia.org/api/getPlaceDetails?id=91329;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=91329;19;https://mojehmen.com/wp-content/uploads/2016/05/h1k_1b_140722_golf_0395-1-370x220.jpg;5;177;false;yes;B;0+15 Rue de constantinople;84791;48.879871;2.320802;Paris;Quality Hotel Opera Saint-Lazare;Hotel;http://tour-pedia.org/api/getPlaceDetails?id=84791;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=84791;12;https://www.crerarhotels.com/media/1042340/Thainstone-House-Inverurie-160.jpg;3.3;178;false;yes;B;0+92 Rue de Vaugirard;84963;48.846957706538;2.3259919254378;Paris;Holiday Inn Paris - Saint-Germain-des-Prés;Hotel;http://tour-pedia.org/api/getPlaceDetails?id=84963;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=84963;16;https://cdn.ostrovok.ru/t/x220/carsolize/bf/b5/bfb55b84dced1ba8711eb058e1268b147ad3b779.jpeg;6.4;177;false;no;B;0+Rue Pergolèse 3;85516;48.875884;2.28634045;Paris;Best Western Premier Hotel Pergolese;Hotel;http://tour-pedia.org/api/getPlaceDetails?id=85516;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=85516;15;https://cdn.deringhall.com/images/560174dde5b91e1813000001/original/351dfe3c17f91ada344d9059dce7164e.jpg?auto=compress&fit=crop&h=220&w=370&response-content-disposition=inline;1;164;false;yes;B;0+203 Rue De Paris;85750;48.82928;2.40161;Paris;Citea Residence Paris Porte De Charenton-le-Pont;Hotel;http://tour-pedia.org/api/getPlaceDetails?id=85750;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=85750;12;https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRUL2V5Z7Vcdg4J41FHT8mLw4816aHLn0H2KC_h00Ms5Imvbdy-;5;154;false;yes;B;5+64 Boulevard Haussmann;85926;48.873973802893;2.3278167843819;Paris;Terrasse du Printemps Haussman;Scenic Lookout;http://tour-pedia.org/api/getPlaceDetails?id=85926;http://tour-pedia.org/api/getReviewsByPlaceId?placeId=85926;17;http://www.lasnereidasaltea.com/wp-content/uploads/2014/03/141-370x220.jpg;6;220;false;no;B;0";


const allHotel = processData(hotelListString);
const typeOfHotel = extractTypes(allHotel);
const nameOfHotel = extractNames(allHotel);
var hotelToDisplay = [];
var nbDays = 1;
var nbRooms = 1;
const request = new XMLHttpRequest();
const modal = document.getElementById('myModal');
const btnClose = document.getElementById('closeReview');
const modalBooking = document.getElementById('modal-book');
const btnCloseBooking = document.getElementById('closeBooking');
const InputHotelNam = document.getElementById("InputHotelName");
//const NationalityList = ["Afghan", "Albanian", "Algerian", "Argentine", "Argentinian", "Australian", "Austrian", "Bangladeshi", "Belgian", "Bolivian", "Batswana", "Brazilian", "Bulgarian", "Cambodian", "Cameroonian", "Canadian", "Chilean", "Chinese", "Colombian", "Costa Rican", "Croatian", "Cuban", "Czech", "Danish", "Dominican", "Ecuadorian", "Egyptian", "Salvadorian", "English", "Estonian", "Ethiopian", "Fijian", "Finnish", "French", "German", "Ghanaian", "Greek", "Guatemalan", "Haitian", "Honduran", "Hungarian", "Icelandic", "Indian", "Indonesian", "Iranian", "Iraqi", "Irish", "Israeli", "Italian", "Jamaican", "Japanese", "Jordanian", "Kenyan", "Kuwaiti", "Lao", "Latvian", "Lebanese", "Libyan", "Lithuanian", "Malaysian", "Malian", "Maltese", "Mexican", "Mongolian", "Moroccan", "Mozambican", "Namibian", "Nepalese", "Dutch", "New Zealand", "Nicaraguan", "Nigerian", "Norwegian", "Pakistani", "Panamanian", "Paraguayan", "Peruvian", "Philippine", "Polish", "Portuguese", "Romanian", "Russian", "Saudi", "Scottish", "Senegalese", "Serbian", "Singaporean", "Slovak", "South African", "Korean", "Spanish", "Sri Lankan", "Sudanese", "Swedish", "Swiss", "Syrian", "Taiwanese", "Tajikistani", "Thai", "Tongan", "Tunisian", "Turkish", "Ukrainian", "Emirati", "British", "American", "Uruguayan", "Venezuelan", "Vietnamese", "Welsh", "Zambian", "Zimbabwean"];
const today = new Date().toISOString().split('T')[0];
const checkin = document.getElementById('check-in-input');
const checkout = document.getElementById('check-out-input');
const searchButton = document.getElementById('searchBUTTON');
const roomSlection = document.getElementById('breakfast-selection');
const priceBreakfast = 110;
const duration = 1000 * 60 * 5;
const btnsSlider = document.getElementsByClassName("aa-top-slider-btn");



/** Initiate the autocomplete function and pass along the Hotel array as possible autocomplete values:*/
autocomplete(InputHotelNam, nameOfHotel);

/** Cookies acceptance **/
if (-1 === document.cookie.indexOf('returning=true')) {

    // run only if cookie not found (-1 means not found)
    swal({
        title: "Notice",
        text: "This website uses cookies to give you the most relevant experience. By using this website, you accept to receive all cookies on this website.",
        icon: "warning",
        dangerMode: true,
    });


    document.cookie = 'returning=true'; // set cookie
}


/** Initialising the check-in and check-out inputs **/
checkin.setAttribute('min', today);
checkin.value = today;
checkout.value = today;
checkout.setAttribute('min', checkin.value);

/** Initialising the selection of categories **/
fillCategories(typeOfHotel);


/** Initialising the search button **/
searchButton.addEventListener('click', function(e){
    e.preventDefault();

    // We compute the hotels to display
    computeHotelToDisplay();

    // We update hte number of results
    let paragraphNumberResults = $("#nb-results")[0];
    paragraphNumberResults.innerHTML = hotelToDisplay.length+" results";

    Display(hotelToDisplay);

    document.getElementById('title-hotel-selection-part').scrollIntoView(true);
});

/** Initialising the close booking button **/
btnCloseBooking.addEventListener('click',function(e){
    e.preventDefault();
    modalBooking.style.display ='none';
});


/** Initialising the close reviews button **/
btnClose.addEventListener('click', function(e){
    e.preventDefault();
    modal.style.display = 'none';
});

/** Function for fetching the reviews **/
function getReviews(idHotel){
    request.open('GET', allHotel[idHotel].reviews, true);
    request.send();
}

/** We put the reviews inside the modal **/
request.onload = function(){
    let dataFetched = JSON.parse(this.response);
    if(request.status >= 200 && request.status < 400){
        let modal_content = document.getElementById('div-reviews-modal');
        modal_content.innerHTML = ''; //We wipe the previous things
        for(let i =0 ; i< dataFetched.length; i++){
            let div_oneReview = document.createElement('div');
            let reviewTitle = document.createElement('h5');
            reviewTitle.innerHTML='Review '+(i+1) +' ['+ ((parseInt(dataFetched[i].polarity) == 0)? "would not recommend": ((parseInt(dataFetched[i].polarity) == 10)? "would recommend" : "neutral")) + ']';

            let paraReview = document.createElement('p');
            paraReview.setAttribute('class', 'paraReviewStyle');
            paraReview.innerHTML = dataFetched[i].text;
            console.log(dataFetched[i]);
            div_oneReview.appendChild(reviewTitle);
            div_oneReview.appendChild(paraReview);
            modal_content.appendChild(div_oneReview);
        }
    }
    else{
        console.log('error');
    }
};


/** When we change the checkin date **/
checkin.addEventListener('change', function(e){
    e.preventDefault();
    let d1 = new Date(checkin.value);
    let d2 = new Date(checkout.value);
    if(d2 - d1 < 0)
    {
        checkout.value = checkin.value;
    }
    checkout.setAttribute('min', checkin.value);
    d2 = new Date(checkout.value);
    let difference = d2.getTime() - d1.getTime();
    nbDays = Math.round(difference / (1000*3600*24));
    setNumberNights(nbDays);
});

/** When we change the numberOfRooms **/
roomSlection.addEventListener('change', function(e){
   e.preventDefault();
   nbRooms = roomSlection.value;
   console.log((nbRooms));
});

/** When we change the checkout date **/
checkout.addEventListener('change', function(e){
    e.preventDefault();
    let d1 = new Date(checkin.value);
    let d2 = new Date(checkout.value);
    let difference = d2.getTime() - d1.getTime();
    nbDays = Math.round(difference / (1000*3600*24));
    setNumberNights(nbDays);
});

/** Function for changing the number of nights on display **/
function setNumberNights(number){
    let spanN = document.getElementById('span-nb-nights');
    if(number == 0) {
        nbDays = 1;
    }
    spanN.innerHTML = nbDays;
}

/** Function for filling the categories on the selection **/
function fillCategories(typeOfHotel){
    let selct = document.getElementById('categorie-selection');

    for(let i=0; i< typeOfHotel.length; i++)
    {
        let toAdd = document.createElement('option');
        toAdd.setAttribute('value', i+1);
        toAdd.innerHTML = typeOfHotel[i];
        selct.appendChild(toAdd);
    }
}

/** Function for extracting the types of hotels **/
function extractTypes(allHotel){
    let typeOfHotel =[];
    for(let i=0 ; i< allHotel.length; i++){
        if(!typeOfHotel.includes(allHotel[i].type))
            typeOfHotel.push(allHotel[i].type);
    }
    return typeOfHotel;
}

/** Function for extracting the names of hotels **/
function extractNames(allHotel){
    let namesOfHotels=[];
    for(let i=0 ; i< allHotel.length; i++){
        if(!namesOfHotels.includes(allHotel[i].name))
            namesOfHotels.push(allHotel[i].name);
    }
    return namesOfHotels;
}

/** Function for displaying the hotels in the search results **/
function Display (TD) {
    let display_case = document.getElementById('div-display-hotel');
    display_case.innerHTML = '';
    for(let i=0 ; i< TD.length; i++){
        addHotelSection(TD[i],display_case);
    }
}

/** This adds a single hotel section **/
function addHotelSection(Hotel, display_case){

    let div_col = document.createElement('div');
    div_col.setAttribute('class', 'col-md-4');

    let art = document.createElement('article');
    art.setAttribute('class', 'aa-properties-item');
    div_col.appendChild(art);

    let linkImg = document.createElement('a');
    linkImg.setAttribute('class', 'aa-properties-item-img');
    art.appendChild(linkImg);
    linkImg.addEventListener('click', function(e){
        e.preventDefault();
        openAndSetUpBookingModal(decodeHtml(this.parentNode.childNodes[2].childNodes[1].childNodes[0].innerHTML));
    });

    let Img = document.createElement('img');
    Img.setAttribute('alt', 'img');
    Img.setAttribute('src',Hotel.imageURL);
    linkImg.appendChild(Img);

    let labelHotel = document.createElement('div');
    let numberHotel = document.createElement('span');
    numberHotel.setAttribute('class','animated-room');
    let RoomAvailable = document.createElement('span');
    RoomAvailable.innerHTML = ' Rooms Available';
    labelHotel.setAttribute('class', 'aa-tag for-rent');
    numberHotel.innerHTML = Hotel.roomAvailable;
    labelHotel.appendChild(numberHotel);
    labelHotel.appendChild(RoomAvailable);

    if(Hotel.alwaysTop == 'true'){
        let featureDiv = document.createElement('div');
        featureDiv.setAttribute('class','aa-featured sold-out')
        featureDiv.innerHTML="Featured"
        art.appendChild(featureDiv);
    }

    setInterval(function() {
        // Display the result in the element with id="demo"

        if(numberHotel.innerHTML > 10)
            numberHotel.innerHTML = numberHotel.innerHTML - 2;
        else
            numberHotel.innerHTML = numberHotel.innerHTML - 1;
        numberHotel.classList.remove('smaller');
        numberHotel.classList.add('bigger');
        // If the count down is finished, write some text
        if (numberHotel.innerHTML < 1) {
            numberHotel.innerHTML = Hotel.roomAvailable;
        }

        setTimeout(function(){
            numberHotel.classList.remove('bigger');
            numberHotel.classList.add('smaller');
        }, 1500);


    }, ((Math.random()*10000 )+ 2500));


    art.appendChild(labelHotel);

    let contentP = document.createElement('div');
    contentP.setAttribute('class','aa-properties-item-content');
    art.appendChild(contentP);

    let div_ad = document.createElement('div');
    div_ad.setAttribute('class','aa-properties-info');
    contentP.appendChild(div_ad);

    let span_add = document.createElement('span');
    span_add.innerHTML = Hotel.address;
    div_ad.appendChild(span_add);

    let img_type = document.createElement('img');
    switch(Hotel.type) {
        case 'Hotel':
            img_type.setAttribute('src','./img/ico/hotel.png');
            break;
        case 'Resort':
            img_type.setAttribute('src','./img/ico/resort.png');
            break;
        case 'Hotel & Spa':
            img_type.setAttribute('src','./img/ico/spa.svg');
            break;
        case 'Hostel':
            img_type.setAttribute('src','./img/ico/hostel.png');
            break;
        case 'Harbor / Marina':
            img_type.setAttribute('src','./img/ico/marina.png');
            break;
        case 'Motel':
            img_type.setAttribute('src','./img/ico/motel.png');
            break;
        case 'Bike Shop Hotel':
            img_type.setAttribute('src','./img/ico/bike.png');
            break;
        default:
            img_type.setAttribute('src','./img/ico/scenic.png');
    }
    img_type.setAttribute('alt',Hotel.type);
    img_type.setAttribute('title',Hotel.type);
    img_type.setAttribute('class','ico_feat');
    div_ad.appendChild(img_type);

    if(Hotel.breakfast === 'yes'){
        let img_breakfast = document.createElement('img');
        img_breakfast.setAttribute('src', './img/ico/breakfast.png');
        img_breakfast.setAttribute('alt','Breakfast available');
        img_breakfast.setAttribute('title','Breakfast available');
        img_breakfast.setAttribute('class','ico_feat');
        div_ad.appendChild(img_breakfast);
    }

    let div_bedding = document.createElement('span');
    let img_bed= document.createElement('img');
    switch(Hotel.bedding){
        case 'B':
            img_bed.setAttribute('src', './img/ico/double.png');
            img_bed.setAttribute('alt', 'double bed');
            img_bed.setAttribute('class','ico_feat');
            div_bedding.appendChild(img_bed);
            div_bedding.setAttribute('title','One double bed');
            break;
        case 'b':
            img_bed.setAttribute('src', './img/ico/single.png');
            img_bed.setAttribute('alt', 'single bed');
            img_bed.setAttribute('class','ico_feat');
            div_bedding.appendChild(img_bed);
            div_bedding.setAttribute('title','One single bed');
            break;
        case 'Bb':
            img_bed.setAttribute('src', './img/ico/double.png');
            img_bed.setAttribute('alt', 'double bed');
            img_bed.setAttribute('class','ico_feat');
            div_bedding.appendChild(img_bed);
            img_bed = document.createElement('img');
            img_bed.setAttribute('src', './img/ico/single.png');
            img_bed.setAttribute('alt', 'single bed');
            img_bed.setAttribute('class','ico_feat');
            div_bedding.appendChild(img_bed);
            div_bedding.setAttribute('title','One single bed and one double bed');
            break;
        case 'bb':
            img_bed.setAttribute('src', './img/ico/single.png');
            img_bed.setAttribute('alt', 'single bed');
            img_bed.setAttribute('class','ico_feat');
            div_bedding.appendChild(img_bed);
            img_bed = document.createElement('img');
            img_bed.setAttribute('src', './img/ico/single.png');
            img_bed.setAttribute('alt', 'single bed');
            img_bed.setAttribute('class','ico_feat');
            div_bedding.appendChild(img_bed);
            div_bedding.setAttribute('title','Two single beds');
            break;
        case 'bbb':
            img_bed.setAttribute('src', './img/ico/single.png');
            img_bed.setAttribute('alt', 'single bed');
            img_bed.setAttribute('class','ico_feat');
            div_bedding.appendChild(img_bed);
            img_bed = document.createElement('img');
            img_bed.setAttribute('src', './img/ico/single.png');
            img_bed.setAttribute('alt', 'single bed');
            img_bed.setAttribute('class','ico_feat');
            div_bedding.appendChild(img_bed);
            img_bed = document.createElement('img');
            img_bed.setAttribute('src', './img/ico/single.png');
            img_bed.setAttribute('alt', 'single bed');
            img_bed.setAttribute('class','ico_feat');
            div_bedding.appendChild(img_bed);
            div_bedding.setAttribute('title','Three single beds');
            break;
        default:
            img_bed.setAttribute('src', './img/ico/double.png');
            img_bed.setAttribute('alt', 'double bed');
            img_bed.setAttribute('class','ico_feat');
            div_bedding.appendChild(img_bed);
            img_bed = document.createElement('img');
            img_bed.setAttribute('src', './img/ico/double.png');
            img_bed.setAttribute('alt', 'double bed');
            img_bed.setAttribute('class','ico_feat');
            div_bedding.appendChild(img_bed);
            div_bedding.setAttribute('title','Two double beds');
            break;
    }
    div_ad.appendChild(div_bedding);

    let div_about = document.createElement('div');
    div_about.setAttribute('class','aa-properties-about' );
    contentP.appendChild(div_about);

    let title_hotel = document.createElement('h3');
    title_hotel.innerHTML = Hotel.name;
    div_about.appendChild(title_hotel);

    let description = document.createElement('p');
    description.innerHTML = 'Customer reviews: ';

    if(Hotel.averageReview == 'No reviews'){
        description.innerHTML += 'No reviews';
    }
    else{

        let ReviewHotelAverage = (Hotel.averageReview / 2);
        let temp = 1;

        while (temp <= ReviewHotelAverage){
            let bstar = document.createElement('img');
            bstar.setAttribute('src', './img/ico/bstar.png');
            bstar.setAttribute('alt', 'a full star');
            bstar.setAttribute('width', '20px');
            description.appendChild(bstar);
            temp ++;
        }

        if(ReviewHotelAverage - (temp - 1) >= 0.5)
        {
            let hstar = document.createElement('img');
            hstar.setAttribute('src', './img/ico/hstar.png');
            hstar.setAttribute('alt', 'a half full star');
            hstar.setAttribute('width', '20px');
            description.appendChild(hstar);
            temp++;
        }

        for(let j= temp-1; j< 5; j++){
            let wstar = document.createElement('img');
            wstar.setAttribute('src', './img/ico/wstar.png');
            wstar.setAttribute('alt', 'an empty star');
            wstar.setAttribute('width', '20px');
            description.appendChild(wstar);
        }
    }


    div_about.appendChild(description);

    if(Hotel.averageReview != 'No reviews'){
        var reviewsButton = document.createElement('a');
        reviewsButton.setAttribute('href','#');
        reviewsButton.setAttribute('class','aa-secondary-btn');
        reviewsButton.innerHTML = 'See reviews';
        reviewsButton.addEventListener('click',function(e){
            e.preventDefault();
            modal.style.display = "block";
            var currentHotName = decodeHtml(this.previousSibling.previousSibling.innerHTML);
            document.getElementById('title-hotel-modal').innerHTML = currentHotName;
            var idHotel = 0;
            var found = false;
            while((idHotel < allHotel.length ) && (!found)){
                if(allHotel[idHotel].name === currentHotName)
                    found = true;
                else{
                    idHotel++;
                }
            }
            if(idHotel <allHotel.length)
                getReviews(idHotel);
            else
                console.log('not found');
        });
        div_about.appendChild(reviewsButton);
    }



    let details = document.createElement('div');
    details.setAttribute('class', 'aa-properties-detial');
    contentP.appendChild(details);

    let price = document.createElement('span');
    price.setAttribute('class', 'aa-price');
    price.innerHTML = 'TOTAL PRICE: ';

    if(Hotel.discount == 0)
        price.innerHTML+='£'+(Hotel.price * nbDays * nbRooms);
    else
    {
        let discountedPrice = document.createElement('strike');
        discountedPrice.innerHTML = '£'+(Hotel.price * nbDays * nbRooms);
        discountedPrice.setAttribute("style", "color: red;");
        price.appendChild(discountedPrice);
        price.innerHTML+='<br>SPECIAL OFFER: £'+(Hotel.price * nbDays * nbRooms * (100 - Hotel.discount)/100).toFixed(2)+'<br>';

        let spanTimeRemaining = document.createElement('span');
        spanTimeRemaining.setAttribute("style", "color: red;");
        price.appendChild(spanTimeRemaining);
        let countDownDate = new Date().getTime() + duration;

        setInterval(function() {

            // Get todays date and time
            let now = new Date().getTime();

            // Find the distance between now and the count down date
            let distance = countDownDate - now;

            // Time calculations for days, hours, minutes and seconds
            let hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            let minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            let seconds = Math.floor((distance % (1000 * 60)) / 1000);

            // Display the result in the element with id="demo"
            spanTimeRemaining.innerHTML ='TIME REMAINING: '+ hours + "h "
                + minutes + "m " + seconds + "s ";

            // If the count down is finished, write some text
            if (distance < 0) {
                countDownDate = new Date().getTime() + (10000*60);
            }
        }, 1000);

    }
    details.appendChild(price);



    let bookButton = document.createElement('a');
    bookButton.setAttribute('class','aa-secondary-btn');
    bookButton.innerHTML = 'Book';



    bookButton.addEventListener('click', function(e){
        e.preventDefault();
        openAndSetUpBookingModal(this.parentNode.previousSibling.childNodes[0].innerHTML);
    });
    details.appendChild(bookButton);


    display_case.appendChild(div_col);
}

/** Set up the buttons in the top slider **/
for(var i=0; i<btnsSlider.length; i++)
    btnsSlider[i].addEventListener('click',function(e){
       e.preventDefault();
        openAndSetUpBookingModal(this.parentNode.childNodes[1].innerHTML)
    });



/** Open Booking modal **/
function openAndSetUpBookingModal(nameHotel){
    //We display the modal
    modalBooking.style.display = "block";

    //We put the name of the hotel
    let title = document.getElementById('title-hotel-Bookingmodal');
    title.innerHTML = nameHotel;
    title.style.color = '#59ABE3';

    //We put the image of the hotel
    let imgDiv = document.getElementById('div-img-hotel');
    imgDiv.innerHTML = "";
    let imgHotel = document.createElement('img');
    imgHotel.setAttribute('src', imageURL(nameHotel));
    imgHotel.setAttribute('alt', 'image of a hotel');
    imgHotel.setAttribute('width', '100%;');
    imgHotel.style.cssFloat = "left";
    imgHotel.style.borderRadius = "25px";
    imgHotel.style.marginBottom = "5px";
    imgDiv.appendChild(imgHotel);

    //We add some text below the image
    let checkinSpan = document.createElement('span');
    let checkoutSpan = document.createElement('span');
    let accoTypeSpan = document.createElement('span');
    let numbOfRoomSpan = document.createElement('span');
    let numbOfNightSpan = document.createElement('span');
    checkinSpan.innerHTML = "Check-in date: "+checkin.value;
    checkoutSpan.innerHTML = "Check-out date: "+checkout.value;
    accoTypeSpan.innerHTML = "Accomodation Type: "+ typeHotel(nameHotel);
    numbOfRoomSpan.innerHTML = "Number of rooms: "+roomSlection.value;
    numbOfNightSpan.innerHTML = "Number of nights: "+nbDays;
    checkinSpan.style.borderRadius = "25px";
    checkinSpan.style.border = "2px solid #59ABE3";
    checkinSpan.style.background = "white";
    checkinSpan.style.padding = "5px";
    checkinSpan.style.margin= "3px";
    checkinSpan.style.cssFloat = "left";

    checkoutSpan.style.borderRadius = "25px";
    checkoutSpan.style.border = "2px solid #59ABE3";
    checkoutSpan.style.background = "white";
    checkoutSpan.style.padding = "5px";
    checkoutSpan.style.margin= "3px";
    checkoutSpan.style.cssFloat = "left";

    accoTypeSpan.style.borderRadius = "25px";
    accoTypeSpan.style.border = "2px solid #59ABE3";
    accoTypeSpan.style.background = "white";
    accoTypeSpan.style.padding = "5px";
    accoTypeSpan.style.margin= "3px";
    accoTypeSpan.style.cssFloat = "left";

    numbOfRoomSpan.style.borderRadius = "25px";
    numbOfRoomSpan.style.border = "2px solid #59ABE3";
    numbOfRoomSpan.style.background = "white";
    numbOfRoomSpan.style.padding = "5px";
    numbOfRoomSpan.style.margin= "3px";
    numbOfRoomSpan.style.cssFloat = "left";

    numbOfNightSpan.style.borderRadius = "25px";
    numbOfNightSpan.style.border = "2px solid #59ABE3";
    numbOfNightSpan.style.background = "white";
    numbOfNightSpan.style.padding = "5px";
    numbOfNightSpan.style.margin= "3px";
    numbOfNightSpan.style.cssFloat = "left";

    imgDiv.appendChild(checkinSpan);
    imgDiv.appendChild(checkoutSpan);
    imgDiv.appendChild(accoTypeSpan);
    imgDiv.appendChild(numbOfRoomSpan);
    imgDiv.appendChild(numbOfNightSpan);

    //We add the map
    initMap(positionHotel(nameHotel));

    //We fill the total page
    let priceNight = priceNightHotel(nameHotel);
    let contentBook = document.getElementById('div-booking-modal');
    contentBook.innerHTML = "";

    let DivPricing = document.createElement('div');
    let pricing = document.createElement('div');
    let divCheckbox = document.createElement('div');

    let checkboxBreakfast = document.createElement('input');
    checkboxBreakfast.setAttribute('type','checkbox');

    if(includeBreakfast(nameHotel) === 'yes'){
        divCheckbox.innerHTML='<br>Include breakfast ';
        divCheckbox.appendChild(checkboxBreakfast);
    }

    //The total for the accomodation
    let AccomodationTOTAL = document.createElement('span');
    AccomodationTOTAL.innerHTML = nbRooms +" room(s) for "+nbDays + " night(s) at £"+priceNight+" = £"+(nbDays*priceNight*nbRooms);

    //The span for the discount
    let NoDiscount = document.createElement('span');
    NoDiscount.innerHTML = (discount(nameHotel) == 0)?'': '<br><i style="color: red;">The discount is not valid for the chosen dates.</i>';

    //The span for the platform fees
    let PlatformFee = document.createElement('span');
    PlatformFee.innerHTML = '<br><br>Hotel booking platform fees (10%) = £'+  (0.1*nbDays*priceNight*nbRooms).toFixed(2);

    //The span for the breakfast
    let Breakfast = document.createElement('span');
    //

    //The span for the total
    let BigTotal = document.createElement('span');
    BigTotal.innerHTML = '<br><hr><br>Total VAT included = <h3>£'+(1.1*nbDays*priceNight*nbRooms).toFixed(2) +'</h3>';


    DivPricing.appendChild(AccomodationTOTAL);
    DivPricing.appendChild(NoDiscount);
    DivPricing.appendChild(divCheckbox);
    DivPricing.appendChild(Breakfast);
    DivPricing.appendChild(PlatformFee);
    DivPricing.appendChild(BigTotal);

    checkboxBreakfast.addEventListener('change', function(e){
        e.preventDefault();
        if(this.checked){


            swal("The price of the breakfast is high and it is possible that the hotel may not have enough food.", {
                buttons: {
                    cancel: "Cancel.",
                    catch: {
                        text: "I wish to proceed.",
                        value: "catch",
                    }},
            })
                .then((value) => {
                    if (value === "catch") {
                        Breakfast.innerHTML = '<br>Breakfast total = £'+(priceBreakfast*nbDays*nbRooms);
                        BigTotal.innerHTML = '<br><hr><br>Total VAT included = <h3>£'+(1.1*nbDays*priceNight*nbRooms+ nbDays*priceBreakfast*nbRooms).toFixed(2) +'</h3>';
                    } else {
                        this.checked = false;
                    }
                });
        }
        else{
            Breakfast.innerHTML = '';
            BigTotal.innerHTML = '<br><hr><br>Total VAT included = <h3>£'+(1.1*nbDays*priceNight*nbRooms).toFixed(2) +'</h3>';
        }

    });


    DivPricing.appendChild(pricing);
    contentBook.appendChild(DivPricing);


    let divButtonBooking = document.getElementById('div-booking-button');
    divButtonBooking.innerHTML = '';
    let NextStepButton = document.createElement('a');
    NextStepButton.setAttribute('class','aa-secondary-btn');
    NextStepButton.innerHTML = 'Next';
    divButtonBooking.appendChild(document.createElement('br'));


    NextStepButton.addEventListener('click',function(e){
        e.preventDefault();
        swal("Your computer's location suggests that you may not be able to afford to stay at this hotel. Do you wish to continue?", {
            buttons: {
                cancel: "I want to cancel.",
                catch: {
                    text: "I can afford it.",
                    value: "catch",
                }},
        })
            .then((value) => {
                if (value === "catch") {
                    let divBooking = document.getElementById('div-booking-modal');
                    divBooking.innerHTML='';
                    let formPersonal = document.createElement('form');
                    formPersonal.setAttribute('id','personalInfoForm');
                    formPersonal.innerHTML+= 'Full name<br>';
                    let inputFirst = document.createElement('input');
                    inputFirst.setAttribute('type','text');
                    inputFirst.setAttribute('name','fullname');
                    inputFirst.setAttribute('id','FullnameInput');
                    inputFirst.required = true;
                    formPersonal.appendChild(inputFirst);
                    formPersonal.innerHTML+='<br>';
                    formPersonal.innerHTML+= 'Email<br>';
                    let inputEmail = document.createElement('input');
                    inputEmail.setAttribute('type','email');
                    inputEmail.setAttribute('name','email');
                    inputEmail.setAttribute('id','EmailInput');
                    inputEmail.required = true;
                    formPersonal.appendChild(inputEmail);
                    formPersonal.innerHTML+='<br>';
                    divBooking.appendChild(formPersonal);
                    let noticeP = document.createElement('p');
                    noticeP.style.margin = "20px";
                    noticeP.innerHTML = '<strong>Note:</strong> All the fields are required and must be filled.';
                    divBooking.appendChild(noticeP);
                    divButtonBooking.innerHTML = '';
                    let proceedPaymentBut = document.createElement('a');
                    proceedPaymentBut.setAttribute('class','aa-secondary-btn');
                    proceedPaymentBut.innerHTML = 'Proceed to payment';
                    proceedPaymentBut.addEventListener('click', function(e){
                        e.preventDefault();
                        if((this.parentNode.previousSibling.previousSibling.childNodes[0].childNodes[2].value == '') || (this.parentNode.previousSibling.previousSibling.childNodes[0].childNodes[6].value == '')){
                            swal("Error!", "Please fill all the fields.", "error");
                        }
                        else{
                            swal("Reservation done!", "Payment instructions have been sent to your email address. Payment must be received within 15 minutes or your booking will be cancelled.", "success");
                            modalBooking.style.display ='none';
                        }

                    });
                    divButtonBooking.appendChild(proceedPaymentBut);
                } else {
                    swal("Booking cancelled.");
                }
            });
    });



    divButtonBooking.appendChild(NextStepButton);
}


/** This returns the URL of the image of the hotel **/
function typeHotel(name){
    let result;
    for(let i=0; i< allHotel.length;i++)
        if(allHotel[i].name === name)
            result = allHotel[i].type;
    return result;
}


/** This returns the URL of the image of the hotel **/
function imageURL(name){
    let result;
    for(let i=0; i< allHotel.length;i++)
        if(allHotel[i].name === name)
            result = allHotel[i].imageURL;
    return result;
}

/** This returns the discount of the hotel **/
function discount(name){
    let result;
    for(let i=0; i< allHotel.length;i++)
        if(allHotel[i].name === name)
            result = allHotel[i].discount;
    return result;
}

/** This returns whether or not the hotel has a discount **/
function includeBreakfast(name){
    let result;
    for(let i=0; i< allHotel.length;i++)
        if(allHotel[i].name === name)
            result = allHotel[i].breakfast;
    return result;
}

/** This compute the set of hotels to display **/
function computeHotelToDisplay(){
    let categorieID = document.getElementById('categorie-selection').value;

    // We filter by type first
    if(categorieID != 0){
        hotelToDisplay = filterCategory(allHotel, typeOfHotel[categorieID -1]);
    }
    else
        hotelToDisplay = allHotel;

    // We filter by price
    let lower = document.getElementById('skip-value-lower').innerHTML;
    let higher = document.getElementById('skip-value-upper').innerHTML;
    hotelToDisplay = filterPrice(hotelToDisplay, lower, higher);

    // We filter by number of rooms available
    let roomNeeded = document.getElementById('breakfast-selection').value;
    if(roomNeeded != 1){
        hotelToDisplay= filterRoomAvailable(hotelToDisplay, roomNeeded);
    }

    // We filter by bedding
    let beddingID = document.getElementById('bedding-selection').value;
    if(beddingID != 0){
        hotelToDisplay = filterBedding(hotelToDisplay, beddingID);
    }

    // We filter by name
    if( ! (InputHotelNam.value === "")){
        hotelToDisplay = filterName(hotelToDisplay, InputHotelNam.value);
    }
}

/** This filters the set HTD and only returns the hotels with the right name **/
function filterName(HTD, name){
    let result = [];


    for(let i=0; i < HTD.length; i++){
        if((HTD[i].name.substr(0,name.length).toUpperCase() === name.toUpperCase()) || (allHotel[i].alwaysTop == 'true'))


            result.push(HTD[i]);
    }
    return result;
}

/** This filters the set HTD and only returns the hotels with the right bedding options **/
function filterBedding(HTD, BED){
    let result = [];
    for(let i=0; i < HTD.length; i++){

        if(((HTD[i].bedding === "b") && ( BED == "single")) ||
            ((HTD[i].bedding === "B") && ( BED == "double")) ||
            (((HTD[i].bedding === "Bb") || (HTD[i].bedding === "bb") || (HTD[i].bedding === "BB")) && ( BED == "twin")) ||
            (((HTD[i].bedding === "Bb") || (HTD[i].bedding === "BB") || (HTD[i].bedding === "bbb")) && ( BED == "family")) ||
            (allHotel[i].alwaysTop == 'true'))
            result.push(HTD[i]);
    }
    return result;



}

/** This filters the set HTD and only returns the hotels with the sufficient number of rooms **/
function filterRoomAvailable(HTD, BID){
    let result = [];
    for(let i=0; i < HTD.length; i++){
        if((HTD[i].roomAvailable >= BID) || (allHotel[i].alwaysTop == 'true'))
            result.push(HTD[i]);
    }
    return result;
}

/** This filters the set HTD and only returns the hotels within the price range **/
function filterPrice(HTD, lower, higher){
    let result= [];
    for(let i=0; i< HTD.length; i++){
        if(( (HTD[i].price >= parseInt(lower )) && (HTD[i].price <= parseInt(higher))) || (HTD[i].alwaysTop == 'true'))
            result.push(HTD[i]);
    }
    return result;
}

/** This filters the set HTD and only returns the hotels with the right type **/
function filterCategory(allHotel, type){
    let result = [];
    for(let i=0; i < allHotel.length; i++){
        if((allHotel[i].type == type) || (allHotel[i].alwaysTop == 'true'))
            result.push(allHotel[i]);
    }
    return result;
}

/** Constructor for the object Hotel **/
function Hotel(address, postal_code, latitude, longitude, location, name, type, details, reviews, roomAvailable, imageURL, averageReview, price, alwaysTop, breakfast, bedding, discount) {
    this.address = address;
    this.location = location;
    this.postal_code = postal_code;
    this.latitude = latitude;
    this.longitude = longitude;
    this.name = name;
    this.type = type;
    this.details = details;
    this.reviews = reviews;
    this.roomAvailable = roomAvailable;
    this.imageURL = imageURL;
    this.averageReview = averageReview;
    this.price = price;
    this.alwaysTop = alwaysTop;
    this.breakfast = breakfast;
    this.bedding= bedding;
    this.discount = discount;
}

/** Constructor for the object Review **/
function Review (language, polarity, source, text){
    this.language = language;
    this.polarity = polarity;
    this.source = source;
    this.text = text;
}

/** This is responsible for extracting the data from the large string **/
function processData(allText) {
    let allTextLines = allText.split('+');
    let lines = [];
    let counter = 0;

    while (counter < allTextLines.length) {
        let current_line = allTextLines[counter].split(';');
        let current_hotel = new Hotel(current_line[0], current_line[1], current_line[2], current_line[3], current_line[4], current_line[5], current_line[6], current_line[7], current_line[8], current_line[9], current_line[10], current_line[11], current_line[12], current_line[13], current_line[14], current_line[15], current_line[16]);
        counter++;
        lines.push(current_hotel);
        //console.log(current_hotel);
    }
    return lines;
}

/** This function decode html and returns the corresponding String **/
function decodeHtml(html) {
    let txt = document.createElement("textarea");
    txt.innerHTML = html;
    return txt.value;
}

/** This returns the price of a single night for the corresponding hotel **/
function priceNightHotel(name){
    let result = 0;

    for(let i=0; i<allHotel.length; i++)
        if(allHotel[i].name === name)
            result = allHotel[i].price;

    return result;
}


/** This returns the latitude and longitude **/
function positionHotel(name){
    let result = [];

    for(let i=0; i<allHotel.length; i++)
        if(allHotel[i].name === name) {
            result.push(allHotel[i].latitude);
            result.push(allHotel[i].longitude);
        }
    return result;
}


/** This initialise the map **/
// Initialize and add the map
function initMap(position) {
    // The location of Uluru
    var uluru = {lat: parseFloat(position[0]), lng: parseFloat(position[1])};
    // The map, centered at Uluru
    var map = new google.maps.Map(
        document.getElementById('map'), {zoom: 16, center: uluru});
    // The marker, positioned at Uluru
    var marker = new google.maps.Marker({position: uluru, map: map});
}
